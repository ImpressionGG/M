function analyze(p,ctr)%% ANALYZE    Analyze sloc swarm%%               analyze(p)             % analyze sloc swarm%   if (nargin < 2)      ctr = center(p,'r');   else      circle(p,ctr,'r',0.5,3);   end      dir = [[1 0]; [1 1]; [0 1]; [-1 1]; [-1 0]; [-1 -1]; [0 -1]; [1 -1]];   col = {'g','b','k','c','g','b','k','c'};   %col = {'m','b','k','y','g','r','k','y'};5555555555555      for (i=1:8)      idx = cluster(ctr,dir(i,:),p,col{i});      if (length(idx) > 0)         edx(i) = idx(1);      else         edx(i) = NaN;      end   end      edx = [edx edx(1)];   gdx = find(~isnan(edx));   h = plot(p(1,edx(gdx)),p(2,edx(gdx)),'r');   set(h,'linewidth',3);      for (i=1:8)      ei = edx(i);      if (~isnan(ei) && ~isnan(ctr))         h = plot([p(1,ctr) p(1,ei)],[p(2,ctr) p(2,ei)],'r');         set(h,'linewidth',2);      end   end         % analyze triangulation      tab = [[2 8]; [1 3]; [2 4]; [3 5]; [4 6]; [5 7]; [6 8]; [7 1];];   Z = [0 0 0 0];   sub = [Z; 1 0 0 1; Z; 0 1 -1 0; Z; -1 0 0 -1; Z; 0 -1 1 0];        for (i=1:8)      if (~isnan(edx(i)))         cdx = cluster(edx(i),dir(i,:),p);         i1 = tab(i,1);                  % first beacon         i2 = tab(i,2);                  % second beacon         for (j=1:1+0*length(cdx))            if (length(cdx) >= j)               idx = [cdx(j) edx(i1) edx(i2) cdx(j)];               if (~any(isnan(idx)))                  h = plot(p(1,idx),p(2,idx),'b');                  set(h,'linewidth',1);               end            end         end                  sub1 = sub(i,1:2);         if (~all(sub1==[0 0]))            sdx = cluster(edx(i),sub1,p);            if (~isempty(sdx))               idx = [sdx(1) edx(i1) edx(i2) sdx(1)];               if (~any(isnan(idx)))                  h = plot(p(1,idx),p(2,idx),'g');                  set(h,'linewidth',1);               end            end         end         sub2 = sub(i,3:4);         if (~all(sub1==[0 0]))            sdx = cluster(edx(i),sub2,p);            if (~isempty(sdx))               idx = [sdx(1) edx(i1) edx(i2) sdx(1)];               if (~any(isnan(idx)))                  h = plot(p(1,idx),p(2,idx),'g');                  set(h,'linewidth',1);               end            end         end      end   end      %splot(p,'r',0);                     % draw numberings on top   set(gca,'xticklabel',[]);   set(gca,'yticklabel',[]);
end
